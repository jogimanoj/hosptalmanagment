<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Registration</title>
  <link rel="stylesheet" href="r.css" />
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    input, select {
      padding: 5px;
      width: 250px;
    }
    .reg {
      max-width: 500px;
      margin: auto;
      background: #f4f4f4;
      padding: 20px;
      border-radius: 8px;
      margin-top: 3rem;
    }
    .reg div {
      margin-bottom: 15px;
    }
    .error {
      color: red;
      font-size: 0.9em;
    }
.hos{
    height: 3rem;
    background-color: cornflowerblue;
    text-align: center;
}
.hos h1{
    color: white;
}
  </style>
</head>
<body>
    <div class="hos">
        <h1>Hospital Mangement</h1>
    </div>
  <section class="reg">
    <h1>Registration</h1>

    <label for="usertype">User Type</label><br>
    <select name="usertype" id="usertype" onchange="handleUserTypeChange()">
      <option value="">Select</option>
      <option value="hospital">Hospital Staff</option>
      <option value="doctor">Doctor</option>
      <option value="laboratory">Laboratory</option>
      <option value="patient">Patient</option>
    </select><br><br>

    <label for="name">Name:</label><br>
    <input name="name" type="text" id="name"><br><br>

    <label for="email">E-Mail:</label><br>
    <input name="email" type="text" id="email"><br><br>

    <label for="contact">Contact:</label><br>
    <input name="contact" type="text" id="contact" placeholder="+91 1234567890"><br><br>

    <!-- Hospital Fields -->
    <div id="hospital_dept" style="display: none;">
      <label for="designation">Designation:</label><br>
      <input name="designation" type="text" id="designation"><br><br>
      <label for="Staff_Id">Staff-Id:</label><br>
      <input name="Staff_Id" type="text" id="staff"><br><br>
      <label for="hospital_name">Hospital Name:</label><br>
      <input name="hospital_name" type="text" id="hospital_name"><br><br>
      <label for="hospass">Password:</label><br>
      <input name="hospass" type="password" id="hospass"><br><br>
      <label for="conhospass">Confirm Password:</label><br>
      <input name="conhospass" type="password" id="conhospass">
    </div>

    <!-- Doctor Fields -->
    <div id="doctor_dept" style="display: none;">
      <label for="Doctor_Id">Doctor-Id:</label><br>
      <input name="Doctor_Id" type="text" id="Doctor_Id"><br><br>
      <label for="experience">Experience:</label><br>
      <input name="experience" type="text" id="experience"><br><br>
      <label for="specialisation">Specialisation:</label><br>
      <input name="specialisation" type="text" id="specialisation"><br><br>
      <label for="docpass">Password:</label><br>
      <input name="docpass" type="password" id="docpass"><br><br>
      <label for="condocpass">Confirm Password:</label><br>
      <input name="condocpass" type="password" id="condocpass">
    </div>

    <!-- Lab Fields -->
    <div id="lab_dept" style="display: none;">
      <label for="Registration-Id">Registration-Id:</label><br>
      <input name="Registration-Id" type="text" id="Registration"><br><br>
      <label for="address">Lab Address:</label><br>
      <input name="address" type="text" id="address"><br><br>
      <label for="labpass">Password:</label><br>
      <input name="labpass" type="password" id="labpass"><br><br>
      <label for="conlabpass">Confirm Password:</label><br>
      <input name="conlabpass" type="password" id="conlabpass">
    </div>

    <!-- Patient Fields -->
    <div id="patient_dept" style="display: none;">
      <label for="dob">Date Of Birth:</label><br>
      
      <input name="dob" type="number" id="dob"><br><br>
      <label for="hospass">Password:</label><br>
      <input name="hospass" type="password" id="hospass"><br><br>
      <label for="conhospass">Confirm Password:</label><br>
      <input name="conhospass" type="password" id="conhospass">
    </div>
    

    <!-- reCAPTCHA -->
    <br>
    <div class="g-recaptcha" data-sitekey="6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI"></div><br>

    <button onclick="submitForm()">Submit</button>
    <p class="error" id="errorMsg"></p>
  </section>

  <script src="https://www.google.com/recaptcha/api.js" async defer></script>

  <script>
    function handleUserTypeChange() {
      const userType = document.getElementById("usertype").value;
      document.getElementById("hospital_dept").style.display = "none";
      document.getElementById("doctor_dept").style.display = "none";
      document.getElementById("lab_dept").style.display = "none";
      document.getElementById("patient_dept").style.display = "none";

      if (userType === "hospital") document.getElementById("hospital_dept").style.display = "block";
      else if (userType === "doctor") document.getElementById("doctor_dept").style.display = "block";
      else if (userType === "laboratory") document.getElementById("lab_dept").style.display = "block";
     else if (userType === "patient") {
  window.location.href = "patient.html"; 
}


    }

    function submitForm() {
      const errorMsg = document.getElementById("errorMsg");
      errorMsg.textContent = "";

      const userType = document.getElementById("usertype").value.trim();
      const name = document.getElementById("name").value.trim();
      const email = document.getElementById("email").value.trim();
      const contact = document.getElementById("contact").value.trim();

      if (!userType || !name || !email || !contact) {
        errorMsg.textContent = "Please fill all required fields.";
        return;
      }

      const emailPattern = /^[^ ]+@[^ ]+\.[a-z]{2,3}$/;
      if (!emailPattern.test(email)) {
        errorMsg.textContent = "Please enter a valid email address.";
        return;
      }

      const contactPattern = /^\+91\s?\d{10}$/;
      if (!contactPattern.test(contact)) {
        errorMsg.textContent = "Please enter a valid contact number (e.g., +91 1234567890).";
        return;
      }

      if (userType === "hospital") {
        const designation = document.getElementById("designation").value.trim();
        const hospitalName = document.getElementById("hospital_name").value.trim();
        const pass=document.getElementById("hospass").value.trim();
        const conpass=document.getElementById("conhospass").value.trim();
        if (!designation || !hospitalName) {
          errorMsg.textContent = "Please fill all hospital-specific fields.";
          return;
        }
        if (!(pass===conpass)){
           errorMsg.textContent="Password and Confirm Password must be same.";
           return;
        }
      }

      if (userType === "doctor") {
        const experience = document.getElementById("experience").value.trim();
        const specialisation = document.getElementById("specialisation").value.trim();
        const pass=document.getElementById("docpass").value.trim();
        const conpass=document.getElementById("condocpass").value.trim();

        if (!experience || !specialisation) {
          errorMsg.textContent = "Please fill all doctor-specific fields.";
          return;
        }
      if (!(pass===conpass)){
           errorMsg.textContent="Password and Confirm Password must be same.";
           return;
      }
    }

      if (userType === "laboratory") {
        const address = document.getElementById("address").value.trim();
        const pass=document.getElementById("labpass").value.trim();
        const conpass=document.getElementById("conlabpass").value.trim();

        if (!address) {
          errorMsg.textContent = "Please provide the lab address.";
          return;
        }
      if (!(pass===conpass)){
           errorMsg.textContent="Password and Confirm Password must be same.";
           return;
      }
    }

      if (userType === "patient") {
        const dob = document.getElementById("dob").value.trim();
        const pass=document.getElementById("hospass").value.trim();
        const conpass=document.getElementById("conhospass").value.trim();

        if (!dob) {
          errorMsg.textContent = "Please select your date of birth.";
          return;
        }
      if (!(pass===conpass)){
           errorMsg.textContent="Password and Confirm Password must be same.";
           return;
      }
    }

      // Validate reCAPTCHA
      const recaptchaResponse = grecaptcha.getResponse();
      if (!recaptchaResponse) {
        errorMsg.textContent = "Please complete the CAPTCHA.";
        return;
      }

      // All validations passed
      alert("Form submitted successfully!");
      // TODO: Send data to the server here using fetch()
    }
  </script>
</body>
</html>